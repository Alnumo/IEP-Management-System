@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Modern Teal/Turquoise Design System */
    --background: 248 250 252; /* Light gray-blue background */
    --foreground: 15 23 42; /* Dark slate text */
    --card: 255 255 255; /* Pure white cards */
    --card-foreground: 15 23 42; /* Dark text on cards */
    --popover: 255 255 255; /* White popovers */
    --popover-foreground: 15 23 42; /* Dark text on popovers */
    --primary: 20 184 166; /* Teal-500 primary */
    --primary-foreground: 255 255 255; /* White text on primary */
    --secondary: 241 245 249; /* Light gray secondary */
    --secondary-foreground: 15 23 42; /* Dark text on secondary */
    --muted: 241 245 249; /* Light gray muted */
    --muted-foreground: 100 116 139; /* Medium gray muted text */
    --accent: 56 189 248; /* Sky-400 accent */
    --accent-foreground: 255 255 255; /* White text on accent */
    --destructive: 239 68 68; /* Red-500 destructive */
    --destructive-foreground: 255 255 255; /* White text on destructive */
    --border: 226 232 240; /* Light gray border */
    --input: 226 232 240; /* Light gray input border */
    --ring: 20 184 166; /* Teal ring color */
    --radius: 0.75rem; /* Slightly more rounded */
    
    /* Custom teal gradient colors */
    --teal-50: 240 253 250;
    --teal-100: 204 251 241;
    --teal-200: 153 246 228;
    --teal-300: 94 234 212;
    --teal-400: 45 212 191;
    --teal-500: 20 184 166;
    --teal-600: 13 148 136;
    --teal-700: 15 118 110;
    --teal-800: 17 94 89;
    --teal-900: 19 78 74;
  }

  .dark {
    /* Dark mode with teal accents */
    --background: 15 23 42; /* Dark slate background */
    --foreground: 248 250 252; /* Light text */
    --card: 30 41 59; /* Dark card background */
    --card-foreground: 248 250 252; /* Light text on cards */
    --popover: 30 41 59; /* Dark popover background */
    --popover-foreground: 248 250 252; /* Light text on popovers */
    --primary: 45 212 191; /* Teal-400 for dark mode */
    --primary-foreground: 15 23 42; /* Dark text on primary */
    --secondary: 51 65 85; /* Dark gray secondary */
    --secondary-foreground: 248 250 252; /* Light text on secondary */
    --muted: 51 65 85; /* Dark gray muted */
    --muted-foreground: 148 163 184; /* Medium gray muted text */
    --accent: 56 189 248; /* Sky-400 accent */
    --accent-foreground: 255 255 255; /* White text on accent */
    --destructive: 239 68 68; /* Red-500 destructive */
    --destructive-foreground: 255 255 255; /* White text on destructive */
    --border: 51 65 85; /* Dark border */
    --input: 51 65 85; /* Dark input border */
    --ring: 45 212 191; /* Teal ring for dark mode */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 5rem; /* Account for fixed header */
  }

  body {
    @apply bg-gradient-to-br from-slate-50 via-blue-50 to-teal-50 text-foreground;
    font-family: 'Tajawal', 'Cairo', system-ui, sans-serif;
    min-height: 100vh;
  }
}

/* Arabic-specific styles */
.font-arabic {
  font-family: 'Tajawal', 'Cairo', system-ui, sans-serif;
}

/* Modern Design System Utilities */
.gradient-primary {
  background: linear-gradient(135deg, rgb(20 184 166) 0%, rgb(56 189 248) 50%, rgb(59 130 246) 100%);
}

.gradient-card {
  background: linear-gradient(135deg, rgba(20, 184, 166, 0.1) 0%, rgba(56, 189, 248, 0.05) 100%);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Enhanced Card Styles */
.modern-card {
  @apply bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 100%);
}

/* Dashboard Stats Cards */
.stats-card {
  @apply p-6 rounded-2xl border-0 shadow-lg hover:shadow-xl transition-all duration-300 relative overflow-hidden;
  background: linear-gradient(135deg, rgba(20, 184, 166, 0.08) 0%, rgba(56, 189, 248, 0.04) 100%);
  backdrop-filter: blur(10px);
}

.stats-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(135deg, rgb(20 184 166), rgb(56 189 248));
}

/* Modern Button Styles */
.btn-primary {
  @apply bg-gradient-to-r from-teal-500 to-blue-500 hover:from-teal-600 hover:to-blue-600 text-white font-medium px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105;
}

.btn-secondary {
  @apply bg-white/90 backdrop-blur-sm border border-teal-200 text-teal-700 hover:bg-teal-50 font-medium px-6 py-3 rounded-xl shadow-md hover:shadow-lg transition-all duration-300;
}

/* Header Gradient */
.header-gradient {
  background: linear-gradient(135deg, rgb(20 184 166) 0%, rgb(56 189 248) 50%, rgb(59 130 246) 100%);
  backdrop-filter: blur(20px);
}

/* Sidebar Modern Design */
.sidebar-modern {
  @apply bg-white/95 backdrop-blur-xl border-r border-white/20;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%);
}

/* Navigation Items */
.nav-item {
  @apply flex items-center px-4 py-3 rounded-xl mx-2 mb-2 text-slate-700 hover:text-teal-700 hover:bg-gradient-to-r hover:from-teal-50 hover:to-blue-50 transition-all duration-200 font-medium;
}

.nav-item.active {
  @apply bg-gradient-to-r from-teal-500/15 to-blue-500/10 text-teal-700 shadow-sm;
  border-left: 4px solid rgb(20 184 166);
}

/* Enhanced Form Styles */
.form-modern {
  @apply bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/20;
}

/* Z-Index Layer Hierarchy */
.z-layer-modal {
  z-index: 1100;
}

.z-layer-header {
  z-index: 1000;
}

.z-layer-mobile-backdrop {
  z-index: 950;
}

.z-layer-sidebar {
  z-index: 900;
}

.z-layer-content {
  z-index: 100;
}

/* Layout Spacing for Fixed Elements */
.main-content-wrapper {
  @apply pt-20; /* Account for fixed header height */
}

.scroll-margin-header {
  scroll-margin-top: 5rem; /* 80px - for content sections */
}

/* Enhanced Tab Styling */
.tab-enhanced {
  @apply relative overflow-hidden;
}

.tab-enhanced::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent 0%, rgba(20, 184, 166, 0.3) 50%, transparent 100%);
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

.tab-enhanced[data-state="active"]::before {
  opacity: 1;
  background: linear-gradient(90deg, rgb(20, 184, 166) 0%, rgb(56, 189, 248) 100%);
}

/* Tab List Enhanced */
.tabs-list-enhanced {
  @apply bg-gradient-to-r from-slate-50 via-white to-slate-50 p-1.5 rounded-xl shadow-inner border border-slate-200/80;
  backdrop-filter: blur(10px);
}

/* Inactive Tab Enhanced Visibility */
.tab-inactive {
  @apply bg-white/70 text-slate-700 border border-slate-200 shadow-sm font-medium;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(248, 250, 252, 0.9) 100%);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.tab-inactive:hover {
  @apply bg-white text-slate-800 border-slate-300 shadow-md transform scale-[1.02];
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 1) 100%);
}

/* Active Tab Enhanced */
.tab-active {
  @apply bg-white text-slate-900 border-teal-200 shadow-lg font-semibold;
  background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(240, 253, 250, 0.8) 100%);
  box-shadow: 0 4px 12px rgba(20, 184, 166, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Focus States for Accessibility */
.tab-focus:focus-visible {
  @apply outline-none ring-2 ring-teal-500 ring-offset-2 ring-offset-white;
}

/* RTL Tab Support */
[dir="rtl"] .tab-enhanced::before {
  background: linear-gradient(-90deg, transparent 0%, rgba(20, 184, 166, 0.3) 50%, transparent 100%);
}

[dir="rtl"] .tab-enhanced[data-state="active"]::before {
  background: linear-gradient(-90deg, rgb(20, 184, 166) 0%, rgb(56, 189, 248) 100%);
}

/* Dashboard Layout Improvements */
.dashboard-container {
  @apply space-y-8 animate-fade-in p-4 md:p-6;
}

.welcome-section {
  @apply relative overflow-hidden rounded-3xl bg-gradient-primary p-6 md:p-8 text-white;
}

.stats-grid {
  @apply flex flex-wrap gap-4 md:gap-6 justify-start items-start;
}

.stats-card-responsive {
  @apply flex-1 min-w-[200px] max-w-[280px] w-full sm:w-auto;
}

/* Logo Responsive Styles */
.header-logo-container {
  @apply h-10 md:h-12 bg-white/10 rounded-xl p-2 backdrop-blur-sm;
}

.sidebar-logo-container {
  @apply w-10 h-10 md:w-12 md:h-12 bg-white rounded-xl p-1 shadow-sm flex items-center justify-center;
}

/* RTL Layout Improvements */
[dir="rtl"] .welcome-text {
  text-align: right;
}

[dir="rtl"] .action-buttons {
  justify-content: flex-end;
}

[dir="ltr"] .welcome-text {
  text-align: right;
}

[dir="ltr"] .action-buttons {
  justify-content: flex-start;
}

/* Mobile Responsive Improvements */
@media (max-width: 768px) {
  .stats-grid {
    @apply grid grid-cols-2 gap-4;
  }
  
  .stats-card-responsive {
    @apply min-w-0 max-w-none;
  }
  
  .welcome-section {
    @apply p-4;
  }
  
  .header-logo-container img {
    max-width: 120px;
  }
  
  /* Mobile Tab Enhancements */
  .tabs-list-enhanced {
    @apply p-1 gap-0.5;
  }
  
  .tab-enhanced {
    @apply text-xs py-2 px-1;
    min-height: 44px; /* Touch target size */
  }
  
  .tab-enhanced:hover {
    @apply transform-none; /* Disable scale on mobile */
  }
  
  /* Mobile Layout Adjustments */
  .main-content-spacing {
    @apply pr-0 pl-0; /* Remove extra padding on mobile */
  }
  
  /* Mobile Sidebar Z-Index Override */
  .mobile-sidebar-open {
    z-index: 1050 !important; /* Above header when open on mobile */
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .tab-inactive {
    @apply border-2 border-slate-400 text-slate-900;
  }
  
  .tab-active {
    @apply border-2 border-teal-600 bg-teal-50;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .tab-enhanced,
  .tab-inactive,
  .tab-enhanced::before {
    transition: none;
  }
}

.input-modern {
  @apply bg-white/90 border-2 border-teal-100 rounded-xl px-4 py-3 focus:border-teal-400 focus:ring-4 focus:ring-teal-100 transition-all duration-200;
}

/* Quick Action Cards */
.action-card {
  @apply p-6 rounded-2xl text-center cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl;
  background: linear-gradient(135deg, rgba(20, 184, 166, 0.9) 0%, rgba(56, 189, 248, 0.8) 100%);
  color: white;
}

/* Responsive Card Grid */
.card-grid {
  @apply grid gap-6;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

/* Loading Animation */
@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.loading-shimmer {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200px 100%;
  animation: shimmer 1.5s infinite;
}

/* Scroll bar styling */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, rgb(20 184 166), rgb(56 189 248));
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, rgb(13 148 136), rgb(14 165 233));
}

/* RTL-specific utilities */
.space-x-reverse > :not([hidden]) ~ :not([hidden]) {
  --tw-space-x-reverse: 1;
}

/* RTL Support for forms and layouts */
[dir="rtl"] .flex-row {
  flex-direction: row-reverse;
}

[dir="rtl"] input, 
[dir="rtl"] textarea, 
[dir="rtl"] select {
  text-align: right;
}

[dir="rtl"] .grid {
  direction: rtl;
}

[dir="rtl"] .space-x-2 > :not([hidden]) ~ :not([hidden]) {
  margin-left: 0;
  margin-right: 0.5rem;
}

[dir="rtl"] .space-x-4 > :not([hidden]) ~ :not([hidden]) {
  margin-left: 0;
  margin-right: 1rem;
}

[dir="rtl"] .space-x-6 > :not([hidden]) ~ :not([hidden]) {
  margin-left: 0;
  margin-right: 1.5rem;
}

/* Radio and checkbox alignment for RTL */
[dir="rtl"] .flex.items-center {
  flex-direction: row-reverse;
}

/* Button spacing for RTL */
[dir="rtl"] .mr-2 {
  margin-right: 0;
  margin-left: 0.5rem;
}

/* Icon spacing for RTL buttons */
[dir="rtl"] .lucide {
  margin-left: 0.5rem;
  margin-right: 0;
}

/* Form labels alignment for RTL */
[dir="rtl"] label {
  text-align: right;
}

/* Input placeholder text alignment for RTL */
[dir="rtl"] input::placeholder,
[dir="rtl"] textarea::placeholder {
  text-align: right;
}

/* Select dropdown alignment for RTL */
[dir="rtl"] [role="combobox"] {
  text-align: right;
}

/* Card content alignment for RTL */
[dir="rtl"] .grid {
  text-align: right;
}

/* Tab navigation for RTL */
[dir="rtl"] [role="tablist"] {
  direction: rtl;
}

/* Checkbox and radio positioning for RTL */
[dir="rtl"] [type="checkbox"],
[dir="rtl"] [type="radio"] {
  margin-left: 0.5rem;
  margin-right: 0;
}

/* Section headlines and card titles alignment for RTL */
[dir="rtl"] h1,
[dir="rtl"] h2,
[dir="rtl"] h3,
[dir="rtl"] h4,
[dir="rtl"] h5,
[dir="rtl"] h6 {
  text-align: right;
}

[dir="rtl"] .card-title,
[dir="rtl"] [role="heading"] {
  text-align: right;
}

/* Card header content alignment for RTL */
[dir="rtl"] .card-header {
  text-align: right;
}

/* General text alignment for Arabic content */
[dir="rtl"] .font-arabic {
  text-align: right;
}

/* Specific targeting for Shadcn UI Card components */
[dir="rtl"] h3[class*="text-2xl"],
[dir="rtl"] h4[class*="text-lg"] {
  text-align: right;
}

/* Tab titles alignment for RTL */
[dir="rtl"] [role="tab"] {
  text-align: center; /* Keep tabs centered but content RTL */
}

/* Force all heading elements in RTL forms to align right */
[dir="rtl"] form h1,
[dir="rtl"] form h2,
[dir="rtl"] form h3,
[dir="rtl"] form h4,
[dir="rtl"] form h5,
[dir="rtl"] form h6 {
  text-align: right !important;
}

/* Ensure card headers and their content align right in RTL */
[dir="rtl"] .card-header h1,
[dir="rtl"] .card-header h2,
[dir="rtl"] .card-header h3,
[dir="rtl"] .card-header h4,
[dir="rtl"] .card-header h5,
[dir="rtl"] .card-header h6 {
  text-align: right !important;
}

/* Subsection headings within card content for RTL */
[dir="rtl"] .card-content h1,
[dir="rtl"] .card-content h2,
[dir="rtl"] .card-content h3,
[dir="rtl"] .card-content h4,
[dir="rtl"] .card-content h5,
[dir="rtl"] .card-content h6 {
  text-align: right !important;
}

/* All text with font-semibold class (common for headings) */
[dir="rtl"] .font-semibold {
  text-align: right !important;
}

/* Page title and subtitle alignment for RTL */
[dir="rtl"] .text-2xl,
[dir="rtl"] .text-3xl {
  text-align: right !important;
}

[dir="rtl"] .text-muted-foreground {
  text-align: right !important;
}

/* AGGRESSIVE Header layout fixes for RTL */
[dir="rtl"] .container {
  direction: rtl !important;
}

[dir="rtl"] header .flex {
  direction: rtl !important;
  flex-direction: row-reverse !important;
}

/* Header container RTL alignment */
[dir="rtl"] header {
  direction: rtl !important;
}

[dir="rtl"] header .container {
  text-align: right !important;
  direction: rtl !important;
}

/* Header content RTL flow */
[dir="rtl"] header .container {
  flex-direction: row-reverse;
  direction: rtl;
}

/* Header logo and title section RTL */
[dir="rtl"] header .flex.items-center:first-of-type {
  text-align: right;
  direction: rtl;
}

[dir="rtl"] header h1 {
  text-align: right !important;
}

[dir="rtl"] header p {
  text-align: right !important;
}

/* Header search bar RTL */
[dir="rtl"] header .relative input {
  text-align: right;
  padding-right: 2.5rem;
  padding-left: 1rem;
}

[dir="rtl"] header .relative svg {
  right: 0.75rem;
  left: auto;
}

/* Header action buttons RTL */
[dir="rtl"] header .flex.items-center:last-of-type {
  direction: rtl;
  text-align: right;
}

/* Language toggle button RTL */
[dir="rtl"] header button .gap-1 {
  flex-direction: row-reverse;
}

/* Mobile menu button RTL */
[dir="rtl"] header .md\\:hidden {
  order: 2;
}

/* Header spacing for RTL */
[dir="rtl"] header .space-x-4 > * {
  margin-right: 1rem;
  margin-left: 0;
}

[dir="rtl"] header .space-x-2 > * {
  margin-right: 0.5rem;
  margin-left: 0;
}

/* Notification badge positioning for RTL */
[dir="rtl"] header .absolute.-top-1 {
  left: -0.25rem;
  right: auto;
}

/* Button content alignment for RTL */
[dir="rtl"] header button span {
  text-align: right;
}

/* Header flex container adjustments for RTL */
[dir="rtl"] header .container > .flex {
  justify-content: space-between;
}

/* Logo section RTL */
[dir="rtl"] header .flex.items-center:first-child {
  order: 1;
}

/* Action buttons section RTL */
[dir="rtl"] header .ml-auto {
  margin-left: 0 !important;
  margin-right: auto !important;
}

/* BALANCED RTL Layout - Not overly aggressive */
[dir="rtl"] body {
  direction: rtl;
}

/* Layout containers RTL */
[dir="rtl"] .min-h-screen {
  direction: rtl;
}

/* Text alignment for content */
[dir="rtl"] .font-arabic {
  text-align: right !important;
  direction: rtl;
}

/* Header specific - already defined above */

/* Main content RTL */
[dir="rtl"] main {
  direction: rtl;
  text-align: right;
}

/* Navigation elements RTL - but preserve sidebar positioning */
[dir="rtl"] nav.flex-1 {
  direction: rtl;
  text-align: right;
}

/* Sidebar positioning and content for RTL */
[dir="rtl"] nav {
  text-align: right;
}

[dir="rtl"] .sidebar {
  text-align: right;
}

/* Sidebar navigation links RTL alignment */
[dir="rtl"] nav.flex-1 {
  direction: rtl;
}

[dir="rtl"] nav.flex-1 a {
  text-align: right;
  direction: rtl;
  justify-content: flex-start;
}

[dir="rtl"] nav.flex-1 .flex.items-center {
  flex-direction: row-reverse;
  text-align: right;
}

[dir="rtl"] nav.flex-1 span {
  text-align: right;
}

/* Sidebar header for mobile RTL */
[dir="rtl"] .flex.items-center.justify-between {
  direction: rtl;
  text-align: right;
}

/* Sidebar footer RTL */
[dir="rtl"] .border-t {
  text-align: right;
  direction: rtl;
}

/* Force sidebar navigation text alignment */
[dir="rtl"] nav a span {
  text-align: right !important;
  width: 100%;
}

/* Sidebar navigation icons for RTL */
[dir="rtl"] nav a svg {
  order: 2;
  margin-left: 0.75rem;
  margin-right: 0;
}

/* Sidebar mobile header RTL */
[dir="rtl"] .md\\:hidden h2 {
  text-align: right;
}

/* Overall sidebar content RTL */
[dir="rtl"] .w-64 {
  direction: rtl;
  text-align: right;
}

[dir="rtl"] .w-64 * {
  text-align: right;
}

/* Breadcrumb navigation for RTL */
[dir="rtl"] nav[role="navigation"] {
  direction: rtl;
  text-align: right;
}

/* Page content spacing and alignment for RTL */
[dir="rtl"] .space-y-4,
[dir="rtl"] .space-y-6 {
  text-align: right;
}

/* Button groups and action bars for RTL */
[dir="rtl"] .flex.items-center.gap-4 {
  direction: rtl;
  justify-content: flex-start;
}

/* Back button alignment for RTL */
[dir="rtl"] .flex.items-center.gap-2 {
  flex-direction: row-reverse;
}

/* Main content area for RTL */
[dir="rtl"] main {
  direction: rtl;
}

/* Layout container RTL support */
[dir="rtl"] .min-h-screen {
  direction: rtl;
}

/* Flex layout RTL adjustments */
[dir="rtl"] .flex:not(.flex-col):not(.flex-row) {
  direction: rtl;
}

/* Page header sections for RTL */
[dir="rtl"] .space-y-4 > div:first-child,
[dir="rtl"] .space-y-6 > div:first-child {
  text-align: right;
  direction: rtl;
}

/* Custom utility for Arabic number formatting */
.arabic-nums {
  font-feature-settings: 'lnum' 1;
}

/* Line clamp utilities */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}